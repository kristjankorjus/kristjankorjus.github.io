<html>
<header>
	<title>Javascript moment</title>
	<style>
		img {width: 100%;}
	</style>
	<script>

		function getURLParameter(name) {
			return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\+/g, '%20')) || null;
		}

		function myButton() {
			window.history.replaceState( {} , 'foo', window.location.pathname + "?robot=" + document.getElementById('robot').value + "&ts=" + document.getElementById('timestamp').value);
			myFunction();
		}


		function myFunction() {
			var cameras = ["back_camera_left", "left_stereo-left", "front_camera", "right_stereo-left", "back_camera_right"];
			var times = [-0.25, 0, 0.25];

			url_robot = getURLParameter('robot');
			url_ts = getURLParameter('ts');
			var robot = (url_robot) ? url_robot:"6D101";
			var timestamp = (url_ts) ? url_ts:"1504171120.9728584";

			document.getElementById('robot').value = robot;
			document.getElementById('timestamp').value = timestamp;

			var count = 0;
			for (i = 0; i < 3; i++) {
				var url_beg = "https://panel.starship.xyz/data/image/ts/" + robot + "/" + String(parseFloat(timestamp) + times[i]) + "/";
				for (j = 0; j < cameras.length; j++) {
					document.getElementById(count).src = url_beg + cameras[j];
					count = count + 1;
				}
			}
		}
	</script>
</header>

<body onload="myFunction();">
Robot: <input type="text" id="robot">
Timestamp: <input type="text" id="timestamp">
<button id="go" onclick="myButton()">ok</button>
<br>

<script>

	document.getElementById("timestamp").addEventListener("keyup", function(event) {
		event.preventDefault();
		if (event.keyCode === 13) {
			document.getElementById("go").click();
		}
	});
</script>

<table style="width:100%;">
  <tr>
    <th><img id="0" src=""></th>
    <th><img id="1" src=""></th>
    <th><img id="2" src=""></th>
		<th><img id="3" src=""></th>
		<th><img id="4" src=""></th>
  </tr>
	<tr>
    <th><img id="5" src=""></th>
    <th><img id="6" src=""></th>
    <th><img id="7" src=""></th>
		<th><img id="8" src=""></th>
		<th><img id="9" src=""></th>
  </tr>
	<tr>
    <th><img id="10" src=""></th>
    <th><img id="11" src=""></th>
    <th><img id="12" src=""></th>
		<th><img id="13" src=""></th>
		<th><img id="14" src=""></th>
  </tr>
</table>


</body>
</html>
